# å¤šè¯­è¨€æ”¯æŒè¯´æ˜ / Internationalization (i18n)

æœ¬æ–‡æ¡£è¯´æ˜é¡¹ç›®çš„å¤šè¯­è¨€å®ç°æ–¹æ¡ˆå’Œä½¿ç”¨æ–¹æ³•ã€‚

## ğŸŒ æ”¯æŒçš„è¯­è¨€

- ğŸ‡¨ğŸ‡³ **ç®€ä½“ä¸­æ–‡** (`zh-CN`)
- ğŸ‡ºğŸ‡¸ **è‹±æ–‡** (`en`)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### è‡ªåŠ¨è¯­è¨€æ£€æµ‹

åº”ç”¨ä¼šåœ¨é¦–æ¬¡åŠ è½½æ—¶è‡ªåŠ¨æ£€æµ‹ç”¨æˆ·çš„æµè§ˆå™¨è¯­è¨€è®¾ç½®ï¼š

```javascript
let currentLang = localStorage.getItem('preferredLang') || 
                 (navigator.language.startsWith('zh') ? 'zh-CN' : 'en');
```

**æ£€æµ‹è§„åˆ™**ï¼š
- å¦‚æœæµè§ˆå™¨è¯­è¨€ä¸º `zh-*`ï¼ˆå¦‚ `zh-CN`ã€`zh-TW`ã€`zh-HK`ï¼‰ï¼Œä½¿ç”¨ç®€ä½“ä¸­æ–‡
- å…¶ä»–è¯­è¨€ä½¿ç”¨è‹±æ–‡ä½œä¸ºé»˜è®¤è¯­è¨€
- å¦‚æœç”¨æˆ·ä¹‹å‰é€‰æ‹©è¿‡è¯­è¨€ï¼Œä¼˜å…ˆä½¿ç”¨ä¿å­˜çš„åå¥½

### æ‰‹åŠ¨åˆ‡æ¢è¯­è¨€

ç”¨æˆ·å¯ä»¥é€šè¿‡å·¥å…·æ å³ä¾§çš„"è¯­è¨€"ä¸‹æ‹‰èœå•æ‰‹åŠ¨åˆ‡æ¢ç•Œé¢è¯­è¨€ï¼š

1. ç‚¹å‡»"è¯­è¨€" / "Language"é€‰æ‹©å™¨
2. é€‰æ‹©éœ€è¦çš„è¯­è¨€
3. ç•Œé¢ç«‹å³åˆ‡æ¢ï¼Œæ— éœ€åˆ·æ–°é¡µé¢
4. è¯­è¨€åå¥½è‡ªåŠ¨ä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨

### æŒä¹…åŒ–å­˜å‚¨

ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€åå¥½ä¼šä¿å­˜åœ¨æµè§ˆå™¨çš„ `localStorage` ä¸­ï¼š

```javascript
localStorage.setItem('preferredLang', lang);
```

ä¸‹æ¬¡è®¿é—®æ—¶ä¼šè‡ªåŠ¨åº”ç”¨ä¿å­˜çš„è¯­è¨€è®¾ç½®ã€‚

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. å¤šè¯­è¨€æ–‡æœ¬å®šä¹‰

æ‰€æœ‰ç•Œé¢æ–‡æœ¬éƒ½å®šä¹‰åœ¨ `i18n` å¯¹è±¡ä¸­ï¼š

```javascript
const i18n = {
    'zh-CN': {
        title: 'Markdown & Mermaid to DOCX',
        fontLabel: 'å­—ä½“:',
        generateButton: 'ç”Ÿæˆ DOCX',
        printButton: 'æ‰“å°é¢„è§ˆ',
        // ... æ›´å¤šæ–‡æœ¬
    },
    'en': {
        title: 'Markdown & Mermaid to DOCX',
        fontLabel: 'Font:',
        generateButton: 'Generate DOCX',
        printButton: 'Print Preview',
        // ... æ›´å¤šæ–‡æœ¬
    }
};
```

### 2. HTML æ ‡è®°

ä½¿ç”¨ `data-i18n` å±æ€§æ ‡è®°éœ€è¦ç¿»è¯‘çš„å…ƒç´ ï¼š

```html
<!-- æ–‡æœ¬å†…å®¹ -->
<h1 data-i18n="title">Markdown & Mermaid to DOCX</h1>
<button data-i18n="generateButton">ç”Ÿæˆ DOCX</button>

<!-- placeholder å±æ€§ -->
<textarea data-i18n-placeholder="editorPlaceholder"></textarea>

<!-- optgroup label -->
<optgroup data-i18n="chineseFonts" label="ä¸­æ–‡å­—ä½“">
```

### 3. è¯­è¨€åº”ç”¨å‡½æ•°

`applyLanguage()` å‡½æ•°è´Ÿè´£æ›´æ–°ç•Œé¢æ–‡æœ¬ï¼š

```javascript
function applyLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('preferredLang', lang);
    
    const texts = i18n[lang];
    
    // æ›´æ–°æ–‡æœ¬å†…å®¹
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (texts[key]) {
            if (el.tagName === 'OPTGROUP') {
                el.label = texts[key];
            } else {
                el.textContent = texts[key];
            }
        }
    });
    
    // æ›´æ–° placeholder
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (texts[key]) {
            el.placeholder = texts[key];
        }
    });
}
```

### 4. è·å–ç¿»è¯‘æ–‡æœ¬

åœ¨ JavaScript ä»£ç ä¸­ä½¿ç”¨ `t()` è¾…åŠ©å‡½æ•°è·å–ç¿»è¯‘ï¼š

```javascript
function t(key) {
    return i18n[currentLang][key] || key;
}

// ä½¿ç”¨ç¤ºä¾‹
statusDiv.textContent = t('generating');
alert(t('success'));
```

## ğŸ“ ç¿»è¯‘æ–‡æœ¬å¯¹ç…§è¡¨

| é”®å (Key) | ç®€ä½“ä¸­æ–‡ | English |
|-----------|---------|---------|
| `title` | Markdown & Mermaid to DOCX | Markdown & Mermaid to DOCX |
| `fontLabel` | å­—ä½“: | Font: |
| `chineseFonts` | ä¸­æ–‡å­—ä½“ | Chinese Fonts |
| `englishFonts` | è‹±æ–‡å­—ä½“ | English Fonts |
| `generateButton` | ç”Ÿæˆ DOCX | Generate DOCX |
| `printButton` | æ‰“å°é¢„è§ˆ | Print Preview |
| `languageLabel` | è¯­è¨€: | Language: |
| `editorHeader` | ç¼–è¾‘å™¨ (æ”¯æŒ Markdown å’Œ Mermaid) | Editor (Markdown & Mermaid Support) |
| `editorPlaceholder` | åœ¨æ­¤è¾“å…¥ Markdown å’Œ Mermaid å†…å®¹... | Enter Markdown and Mermaid content here... |
| `previewHeader` | å®æ—¶é¢„è§ˆ | Live Preview |
| `previewPlaceholder` | é¢„è§ˆå°†æ˜¾ç¤ºåœ¨æ­¤å¤„... | Preview will appear here... |
| `loadingDefault` | æ­£åœ¨åŠ è½½ default.md... | Loading default.md... |
| `defaultLoaded` | default.md å·²åŠ è½½ã€‚ | default.md loaded. |
| `defaultLoadError` | æ— æ³•åŠ è½½ default.md: | Failed to load default.md: |
| `defaultLoadInfo` | (å¯é€‰) åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º default.md æ–‡ä»¶ä»¥è‡ªåŠ¨åŠ è½½é»˜è®¤å†…å®¹ã€‚ | (Optional) Create default.md in the root directory to load default content automatically. |
| `generating` | æ­£åœ¨ç”Ÿæˆ DOCX... | Generating DOCX... |
| `success` | DOCX å·²ç”Ÿæˆï¼ | DOCX generated! |
| `error` | ç”Ÿæˆå¤±è´¥: | Generation failed: |
| `printPrompt` | è¯·ä½¿ç”¨æµè§ˆå™¨çš„æ‰“å°åŠŸèƒ½ (Ctrl+P / Cmd+P) | Please use browser print function (Ctrl+P / Cmd+P) |

## ğŸ”„ æ·»åŠ æ–°è¯­è¨€

è¦æ·»åŠ æ–°çš„è¯­è¨€æ”¯æŒï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### 1. æ·»åŠ è¯­è¨€æ–‡æœ¬

åœ¨ `i18n` å¯¹è±¡ä¸­æ·»åŠ æ–°è¯­è¨€çš„ç¿»è¯‘ï¼š

```javascript
const i18n = {
    'zh-CN': { /* ... */ },
    'en': { /* ... */ },
    'ja': {  // æ—¥æ–‡ç¤ºä¾‹
        title: 'Markdown & Mermaid to DOCX',
        fontLabel: 'ãƒ•ã‚©ãƒ³ãƒˆ:',
        generateButton: 'DOCXç”Ÿæˆ',
        // ... æ‰€æœ‰é”®å
    }
};
```

### 2. æ·»åŠ è¯­è¨€é€‰é¡¹

åœ¨ HTML ä¸­æ·»åŠ è¯­è¨€é€‰æ‹©é€‰é¡¹ï¼š

```html
<select id="langPicker">
    <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
    <option value="en">English</option>
    <option value="ja">æ—¥æœ¬èª</option>  <!-- æ–°å¢ -->
</select>
```

### 3. æ›´æ–°è¯­è¨€æ£€æµ‹é€»è¾‘ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦è‡ªåŠ¨æ£€æµ‹æ–°è¯­è¨€ï¼š

```javascript
let currentLang = localStorage.getItem('preferredLang') || 
                 (navigator.language.startsWith('zh') ? 'zh-CN' : 
                  navigator.language.startsWith('ja') ? 'ja' : 
                  'en');
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä¿æŒé”®åä¸€è‡´

- æ‰€æœ‰è¯­è¨€å¿…é¡»åŒ…å«ç›¸åŒçš„é”®å
- ç¼ºå¤±çš„é”®åä¼šå¯¼è‡´æ˜¾ç¤ºåŸé”®å

### 2. ä½¿ç”¨æè¿°æ€§é”®å

```javascript
// âœ… å¥½
'generateButton': 'ç”Ÿæˆ DOCX'

// âŒ ä¸å¥½
'btn1': 'ç”Ÿæˆ DOCX'
```

### 3. å¤„ç†åŠ¨æ€æ–‡æœ¬

å¯¹äºåŒ…å«å˜é‡çš„æ–‡æœ¬ï¼Œä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ï¼š

```javascript
// JavaScript ä¸­æ‹¼æ¥
statusDiv.textContent = `${t('generating')} Mermaid ${segment.id}...`;
```

### 4. ä¿æŒç®€æ´

- ç•Œé¢æ–‡æœ¬åº”ç®€çŸ­æ˜äº†
- é¿å…è¿‡é•¿çš„å¥å­
- è€ƒè™‘ä¸åŒè¯­è¨€çš„æ–‡æœ¬é•¿åº¦å·®å¼‚

## ğŸ› å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆåˆ‡æ¢è¯­è¨€åæŸäº›æ–‡æœ¬æ²¡æœ‰æ›´æ–°ï¼Ÿ

A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. HTML å…ƒç´ æ˜¯å¦æ·»åŠ äº† `data-i18n` å±æ€§
2. é”®åæ˜¯å¦åœ¨ `i18n` å¯¹è±¡ä¸­å®šä¹‰
3. JavaScript åŠ¨æ€ç”Ÿæˆçš„æ–‡æœ¬æ˜¯å¦ä½¿ç”¨äº† `t()` å‡½æ•°

### Q: å¦‚ä½•æµ‹è¯•ä¸åŒè¯­è¨€ï¼Ÿ

A: ä¸‰ç§æ–¹æ³•ï¼š
1. ä½¿ç”¨è¯­è¨€é€‰æ‹©å™¨æ‰‹åŠ¨åˆ‡æ¢
2. ä¿®æ”¹æµè§ˆå™¨è¯­è¨€è®¾ç½®ååˆ·æ–°é¡µé¢
3. æ¸…é™¤ localStorage åæµ‹è¯•è‡ªåŠ¨æ£€æµ‹

### Q: è¯­è¨€åå¥½ä¿å­˜åœ¨å“ªé‡Œï¼Ÿ

A: ä¿å­˜åœ¨æµè§ˆå™¨çš„ `localStorage` ä¸­ï¼Œé”®åä¸º `preferredLang`ã€‚

å¯ä»¥é€šè¿‡æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ï¼š
```javascript
localStorage.getItem('preferredLang')
```

æ¸…é™¤ä¿å­˜çš„è¯­è¨€åå¥½ï¼š
```javascript
localStorage.removeItem('preferredLang')
```

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `index.html` - ä¸»åº”ç”¨æ–‡ä»¶ï¼ŒåŒ…å«å¤šè¯­è¨€å®ç°
- `readme.md` - é¡¹ç›®è¯´æ˜ï¼ŒåŒ…å«å¤šè¯­è¨€åŠŸèƒ½ä»‹ç»
- `PROJECT_STRUCTURE.md` - é¡¹ç›®ç»“æ„è¯´æ˜ï¼ŒåŒ…å«å¤šè¯­è¨€æŠ€æœ¯ç»†èŠ‚

## ğŸ¤ è´¡çŒ®ç¿»è¯‘

æ¬¢è¿è´¡çŒ®æ–°çš„è¯­è¨€ç¿»è¯‘ï¼

æäº¤ Pull Request æ—¶è¯·ï¼š
1. ç¡®ä¿åŒ…å«æ‰€æœ‰é”®åçš„ç¿»è¯‘
2. ç¿»è¯‘å‡†ç¡®ã€è‡ªç„¶
3. åœ¨ README ä¸­æ›´æ–°æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
4. æµ‹è¯•è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ­£å¸¸

---

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issueã€‚